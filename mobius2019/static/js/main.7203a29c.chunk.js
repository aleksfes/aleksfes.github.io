(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(43)},28:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),s=n.n(i),o=(n(28),n(5)),u=(n(33),n(3)),c=n(4),l=n(7),d=n(6),m=n(8),E=(n(34),n(1)),p=n.n(E),f=n(2);function _(e,t){return function(n,r){if(!n)return t;var a=r.type,i=e[a];return i?i(n,r):n}}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e[t]=function(e,n){e&&e.dispatch({type:t,payload:n})},e},{})}var v,b={inFullscreen:!1},g=h("TOGGLE"),N=_({TOGGLE:function(e){return{inFullscreen:!e.inFullscreen}}},b);!function(e){e.MAIN="MAIN",e.ADMIN_MAIN="ADMIN_MAIN",e.ADMIN_QUESTIONS_LIST="ADMIN_QUESTIONS_LIST",e.QUEST="QUEST"}(v||(v={}));var y={route:v.MAIN},O=h("GO_TO"),Q=_({GO_TO:function(e,t){return{route:t.payload}}},y),S=n(12),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(u.a)(this,e),this.key=t}return Object(c.a)(e,[{key:"store",value:function(e){var t=JSON.stringify(e);window.localStorage.setItem(this.key,t)}},{key:"restore",value:function(e){var t=e||null,n=window.localStorage.getItem(this.key);if(!n)return t;try{return JSON.parse(n)}catch(r){console.error("serialized value",n),console.error("while parsing serialized value from key ".concat(this.key),r)}return t}}]),e}(),k={questions:new T("mobius2019_questions"),users:new T("mobius2019_users")},w={questions:k.questions.restore([]),currentQuestionId:0},x=n(9);function U(e,t,n){var r=3===arguments.length?Object(x.a)({},t,n):t;return Object(f.a)({},e,r)}var I,A=h("ADD","DELETE","UPDATE","REPLACE","GO_TO_QUESTION"),j=_({ADD:function(e,t){var n=Object(f.a)({},t.payload),r=e.questions;return n.id=r.length+1,U(e,"questions",[].concat(Object(S.a)(r),[n]))},DELETE:function(e,t){var n=t.payload,r=e.questions.map(function(e){return e&&e.id!==n.id?e:null});return U(e,"questions",r)},UPDATE:function(e,t){var n=t.payload,r=n.isFirst,a=e.questions.map(function(e){return e?(r&&(e=Object(f.a)({},e,{isFirst:!1})),e.id===n.id?n:e):null});return U(e,"questions",a)},GO_TO_QUESTION:function(e,t){return U(e,"currentQuestionId",t.payload)},REPLACE:function(e,t){return U(e,"questions",t.payload)}},w),q={users:k.users.restore([]),currentUser:null,registrationUser:null},R=h("ADD_OR_UPDATE","REG_USER","CLEAR_REG_USER"),C=_({CLEAR_REG_USER:function(e){return U(e,"registrationUser",null)},REG_USER:function(e,t){return U(e,"registrationUser",t.payload)},ADD_OR_UPDATE:function(e,t){var n=t.payload,r=Object.keys(n).reduce(function(e,t){var r=t,a=n[r];return e[r]="string"===typeof a?a.trim():a,e},{}),a=e.users.findIndex(function(e){return e.phone===r.phone}),i=-1!==a,s=Object(S.a)(e.users);return i?s[a]=r:s.push(r),U(e,"currentUser",r),U(e,"users",s)}},q),F={fullScreen:g,routing:O,questions:A,users:R},D=new(function(){function e(){Object(u.a)(this,e),this._store=null,this.storeUnsubscriber=null,this.storedQuestions=[],this.storedUsers=[],this.ROUTE_STATES=v}return Object(c.a)(e,[{key:"setStore",value:function(e){var t=this;this._store=e,this.unsubscribeStore(),e&&e.subscribe(function(){var n=e.getState();t.storeQuestions(n),t.storeUsers(n)})}},{key:"restartGame",value:function(){F.users.CLEAR_REG_USER(this._store),F.questions.GO_TO_QUESTION(this._store,0),F.routing.GO_TO(this._store,v.QUEST)}},{key:"toggleFullscreen",value:function(){F.fullScreen.TOGGLE(this._store)}},{key:"goToRoute",value:function(e){F.routing.GO_TO(this._store,e)}},{key:"addQuestion",value:function(e){F.questions.ADD(this._store,e)}},{key:"deleteQuestion",value:function(e){F.questions.DELETE(this._store,e)}},{key:"updateQuestion",value:function(e){F.questions.UPDATE(this._store,e)}},{key:"nextQuestion",value:function(e){F.questions.GO_TO_QUESTION(this._store,e);var t=this.state.users.registrationUser;t&&F.users.ADD_OR_UPDATE(this._store,Object(f.a)({},t,{lastQuestionId:e}))}},{key:"updateQuestions",value:function(e){var t=e instanceof Array?e:e.questions;F.questions.REPLACE(this._store,t)}},{key:"registerUser",value:function(e){F.users.REG_USER(this._store,e)}},{key:"unsubscribeStore",value:function(){this.storeUnsubscriber&&(this.storeUnsubscriber(),this.storeUnsubscriber=null)}},{key:"storeQuestions",value:function(e){var t=e.questions.questions;t!==this.storedQuestions&&(this.storedQuestions=t,k.questions.store(t))}},{key:"storeUsers",value:function(e){var t=e.users.users;t!==this.storedUsers&&(this.storedUsers=t,k.users.store(t))}},{key:"state",get:function(){return this._store.getState()}}]),e}()),L=n(22),M=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).toggleState=function(){return D.toggleFullscreen()},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isFullScreen,i=t.route===v.MAIN,s={AppHeader_small:!i};return a.a.createElement("div",{className:p()("AppHeader",n,s)},!r&&i&&a.a.createElement("button",{type:"button",onClick:function(){return e.toggleFullScreen()},className:"AppHeader__fullscreen"},"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c"),!i&&a.a.createElement("button",{type:"button",onClick:function(){return D.goToRoute(D.ROUTE_STATES.MAIN)}},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))}},{key:"componentDidMount",value:function(){L.on("change",this.toggleState)}},{key:"componentWillUnmount",value:function(){L.off("change",this.toggleState)}},{key:"toggleFullScreen",value:function(){var e=this;L.toggle().catch(function(t){return console.log("while toggling fullsreen state, current state is ".concat(e.props.isFullScreen),t)})}}]),t}(a.a.Component),G=Object(o.b)(function(e){return{route:e.routing.route,isFullScreen:e.fullScreen.inFullscreen}})(M),P=(n(35),function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("button",{type:"button",onClick:function(){return D.restartGame()}},"\u041d\u0430\u0447\u0430\u0442\u044c")),a.a.createElement("div",{className:"Landing__goToAdmin"},a.a.createElement("button",{type:"button",onClick:function(){return D.goToRoute(D.ROUTE_STATES.ADMIN_MAIN)}},"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435")))});n(36),n(37);function J(e,t,n){return(""+e).padStart(t,n)}!function(e){e.JSON="JSON",e.CSV="CSV"}(I||(I={}));var B={JSON:"application/json",CSV:"text/csv"};function H(e){V(e.fileObjectUrl);var t=e.charset||"utf-8",n=B[e.fileType],r="data:".concat(n,";charset=").concat(t),a=new Blob([e.content],{type:r});return window.URL.createObjectURL(a)}function V(e){e&&window.URL.revokeObjectURL(e)}function z(e,t){var n=function(){var e=new Date,t=e.getFullYear(),n=J(e.getMonth()+1,2,"0"),r=J(e.getDate(),2,"0"),a=J(e.getHours(),2,"0"),i=J(e.getMinutes(),2,"0"),s=J(e.getSeconds(),2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"--").concat(a,"-").concat(i,"-").concat(s)}();return t?"".concat(e,"-").concat(n,".").concat(t):"".concat(n,"-").concat(e)}var W=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={fileObjectUrl:"",fileName:""},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.buttonText,n=this.state,r=n.fileObjectUrl,i=n.fileName;return a.a.createElement("div",null,a.a.createElement("button",{type:"button",onClick:function(){return e.prepareFile()},className:"FileExport__button"},t),r&&a.a.createElement("a",{href:r,download:i,className:"FileExport__button"},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u0430\u0439\u043b"))}},{key:"prepareFile",value:function(){this.releaseStateFileObject();var e=this.props.getFileDescription();this.setState({fileObjectUrl:H({content:this.stringifyContent(e.content),fileType:e.type}),fileName:z(e.nameSection,I[e.type].toLowerCase())})}},{key:"releaseStateFileObject",value:function(){var e=this.state.fileObjectUrl;e&&V(e)}},{key:"stringifyContent",value:function(e){return e?"object"===typeof e?JSON.stringify(e,null,4):JSON.stringify(e):""}}]),t}(a.a.Component),Y=(n(38),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.buttonText;return a.a.createElement("label",{className:"FileImport"},t,a.a.createElement("input",{type:"file",className:"FileImport_import",onChange:function(t){return e.onFileSelected(t)}}))}},{key:"onFileSelected",value:function(e){var t=this,n=e.target.files,r=n&&n[0];r&&function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){var n=e.target.result;t(n)},r.onerror=function(e){n(e)},r.readAsText(e)})}(r).then(function(e){var n=t.props,r=n.parseJson,a=n.onContentRead;if(!r)return a(e);a(JSON.parse(e))}).catch(function(e){return console.error("while reading file ".concat(r.name),e)})}}]),t}(a.a.Component)),K=Object(o.b)(function(e){return{questions:e.questions.questions,users:e.users.users}})(function(e){var t=e.questions,n=e.users;return a.a.createElement("ul",{className:"AdminMenu__menu"},a.a.createElement("li",null,a.a.createElement("button",{type:"button",onClick:function(){return D.goToRoute(D.ROUTE_STATES.ADMIN_QUESTIONS_LIST)}},"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u0430\u043c\u0438")),a.a.createElement("li",null,a.a.createElement(Y,{buttonText:"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438\u0437 \u0444\u0430\u0439\u043b\u0430",parseJson:!0,onContentRead:function(e){D.updateQuestions(e),window.alert("\u0412\u043e\u043f\u0440\u043e\u0441 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")}})),a.a.createElement("li",null,a.a.createElement(W,{buttonText:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b",getFileDescription:function(){return{type:I.JSON,content:{questions:t},nameSection:"questions"}}})),a.a.createElement("li",null,a.a.createElement(W,{buttonText:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",getFileDescription:function(){return{type:I.JSON,content:{users:n},nameSection:"users"}}})),a.a.createElement("li",null,a.a.createElement("button",{type:"button",onClick:function(){return D.goToRoute(D.ROUTE_STATES.MAIN)}},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")))});n(39),n(40);var X={"<%reg%>":"\u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 (\u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432)","<%login%>":'\u0432\u044b\u0432\u043e\u0434 \u043b\u043e\u0433\u0438\u043d\u0430 \u0438\u043b\u0438 "\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c" (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e)'};var Z=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={isNew:!0,hideTextError:!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.question,a=t.isNew,i=t.hideTextError,s=this.props,o=s.qs,u=s.className,c=n.answers.filter(Boolean).length>0,l=!c,d=n.text.split("<%reg%>").length>2,m="QuestionEdit__".concat(n.id),E="".concat(m,"__text"),f="".concat(m,"__isFirst"),_="".concat(m,"__randomText"),h=this.getRootId(this.props.question?this.props.question.id:0);return r.createElement("div",{className:p()("QuestionEdit",u),id:h},r.createElement("form",{onSubmit:function(t){return e.onSubmit(n,t)}},r.createElement("div",{className:p()("QuestionEdit__indented","QuestionEdit__row")},r.createElement("b",null,a?"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441":l?"\u0424\u0438\u043d\u0430\u043b, #".concat(n.id):"\u0412\u043e\u043f\u0440\u043e\u0441, #".concat(n.id)),!l&&r.createElement("div",{className:p()("QuestionEdit__wideItem","QuestionEdit__checkboxContainer")},r.createElement("label",null,r.createElement("input",{type:"checkbox",name:f,checked:n.isFirst,onChange:function(t){return e.updateQuestionProp("isFirst",t.target.checked)},className:"QuestionEdit__checkbox"}),"\u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"))),r.createElement("div",{className:p()("QuestionEdit__row","QuestionEdit__indented")},r.createElement("label",{htmlFor:E},"\u0422\u0435\u043a\u0441\u0442"),r.createElement("div",{className:"QuestionEdit__wideItem"},r.createElement("textarea",{name:E,id:E,className:p()("","QuestionEdit__bigEditor"),value:n.text,onChange:function(t){return e.updateQuestionProp("text",t.target.value)},placeholder:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0432\u043e\u043f\u0440\u043e\u0441\u0430!"}),r.createElement("div",{className:"QuestionEdit__checkboxContainer"},r.createElement("label",null,r.createElement("input",{type:"checkbox",name:_,checked:!!n.randomLineText,onChange:function(t){return e.updateQuestionProp("randomLineText",t.target.checked)},className:"QuestionEdit__checkbox"}),"\u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443")),n.randomLineText&&r.createElement("div",null,"\u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415: \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u0430\u044f \u043d\u0435\u043f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430 \u0438\u0437 \u0442\u0435\u043a\u0441\u0442\u0430 \u044d\u0442\u043e\u0433\u043e \u0432\u043e\u043f\u0440\u043e\u0441\u0430!!!"),d&&r.createElement("div",{className:"QuestionEdit__error"},"\u0412\u044b \u0432\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0431\u043b\u043e\u043a\u0430 \u0432\u0432\u043e\u0434\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445!"))),!n.text&&!i&&r.createElement("div",{className:p()("QuestionEdit__indented","QuestionEdit__error")},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0432\u043e\u043f\u0440\u043e\u0441\u0430!"),c&&r.createElement("div",{className:"QuestionEdit__indented"},"\u041e\u0442\u0432\u0435\u0442\u044b:"),n.answers.map(function(t,n){if(!t)return null;var a=t,i="".concat(m,"_answer_").concat(a.id),s="".concat(i,"_goto"),u="".concat(i,"_input"),c="".concat(i,"_wrongInputGot");return r.createElement("div",{className:"QuestionEdit__indented",key:a.id},r.createElement("div",{className:p()("QuestionEdit__row","QuestionEdit__indented"),key:"".concat(a.id,"_text")},r.createElement("textarea",{name:i,id:i,value:a.text,onChange:function(t){return e.updateAnswerProp(a,"text",t.target.value)},className:p()("QuestionEdit__wideItem","QuestionEdit__bigEditor"),placeholder:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043e\u0442\u0432\u0435\u0442\u0430!!!"}),r.createElement("button",{type:"button",onClick:function(){return e.deleteAnswer(n)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),!a.text&&r.createElement("div",{className:p()("QuestionEdit__indented","QuestionEdit__error")},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043e\u0442\u0432\u0435\u0442\u0430!!!"),r.createElement("div",{className:p()("QuestionEdit__row","QuestionEdit__indented","QuestionEdit__hor-indented","QuestionEdit__checkboxContainer"),key:"".concat(a.id,"_userInput")},r.createElement("label",null,r.createElement("input",{type:"checkbox",name:u,checked:a.needUserInput,onChange:function(t){return e.updateAnswerProp(a,"needUserInput",t.target.checked)},className:"QuestionEdit__checkbox"}),"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0432\u043e\u0434")),a.needUserInput&&r.createElement("div",{className:p()("QuestionEdit__row","QuestionEdit__hor-indented"),key:"".concat(a.id,"_wrongInputGoto")},r.createElement("label",{htmlFor:c},"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430"),r.createElement("div",{className:"QuestionEdit__wideItem"},r.createElement("select",{id:c,value:a.incorrectUserInputNextQuestion,name:c,onChange:function(t){return e.updateAnswerProp(a,"incorrectUserInputNextQuestion",parseInt(t.target.value,10))}},!a.incorrectUserInputNextQuestion&&r.createElement("option",{value:"0"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043f\u0440\u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u043e\u043c \u0432\u0432\u043e\u0434\u0435"),o.map(function(e){return e&&r.createElement("option",{key:e.id,value:e.id},e.text)})),r.createElement("div",null,r.createElement("a",{href:"#".concat(e.getRootId(a.incorrectUserInputNextQuestion))},a.incorrectUserInputNextQuestion?"\u043a \u0432\u043e\u043f\u0440\u043e\u0441\u0443":"\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439")),!a.incorrectUserInputNextQuestion&&r.createElement("div",{className:"QuestionEdit__error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430!!!"))),r.createElement("div",{className:p()("QuestionEdit__row","QuestionEdit__hor-indented"),key:"".concat(a.id,"_goto")},r.createElement("label",{htmlFor:s},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a"),r.createElement("div",{className:"QuestionEdit__wideItem"},r.createElement("select",{id:s,value:a.nextQuestion,name:s,onChange:function(t){return e.updateAnswerProp(a,"nextQuestion",parseInt(t.target.value,10))}},!a.nextQuestion&&r.createElement("option",{value:"0"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430!!!"),o.map(function(e){return e&&r.createElement("option",{key:e.id,value:e.id},e.text)})),r.createElement("div",null,r.createElement("a",{href:"#".concat(e.getRootId(a.nextQuestion))},a.nextQuestion?"\u043a \u0432\u043e\u043f\u0440\u043e\u0441\u0443":"\u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439")),!a.nextQuestion&&r.createElement("div",{className:"QuestionEdit__error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u043e\u0447\u043a\u0443 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430!!!"))))}),r.createElement("div",{className:"QuestionEdit__indented"},r.createElement("button",{type:"button",onClick:function(){return e.addAnswer()}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442")),r.createElement("div",{className:"QuestionEdit__indented"},a&&r.createElement("button",{type:"submit",className:"QuestionEdit__submit"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0432\u043e\u043f\u0440\u043e\u0441"),this.props.onDelete&&r.createElement("button",{type:"button",className:"QuestionEdit__delete",onClick:function(){return e.props.onDelete(n)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441"))))}},{key:"updateQuestionProp",value:function(e,t){var n=Object(f.a)({},this.state.question,Object(x.a)({},e,t));this.setState({question:n,hideTextError:!1}),this.state.isNew||this.onSubmit(n)}},{key:"updateAnswerProp",value:function(e,t,n){var r=Object(f.a)({},e,Object(x.a)({},t,n)),a=this.state.question.answers.map(function(t){return t&&t.id===e.id?r:t});this.updateQuestionProp("answers",a)}},{key:"onSubmit",value:function(e,t){t&&t.preventDefault(),e.text&&(this.state.isNew?t&&(this.props.onSave(e),this.setState({hideTextError:!0,question:{id:0,text:"",answers:[]}})):this.props.onSave(e))}},{key:"deleteAnswer",value:function(e){var t=this.state.question.answers.map(function(t,n){return t&&n!==e?t:null});this.updateQuestionProp("answers",t)}},{key:"addAnswer",value:function(){var e=this.state.question.answers,t={id:e.length+1,text:"",nextQuestion:0},n=[].concat(Object(S.a)(e),[t]);this.updateQuestionProp("answers",n)}},{key:"getRootId",value:function(e){return e?"".concat("QuestionEdit_root_","_").concat(e):"".concat("QuestionEdit_root_","_new")}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,r=e.question,a=t.question;return r?a&&a.id===r.id?{isNew:!1,hideTextError:!1,question:Object(f.a)({},a,{isFirst:r.isFirst})}:{isNew:!1,hideTextError:!1,question:(n=r,Object(f.a)({},n,{answers:n.answers.map(function(e){return e?Object(f.a)({},e):null})}))}:a?null:{isNew:!0,hideTextError:!0,question:{id:0,text:"",answers:[]}}}}]),t}(r.Component),$=Object(o.b)(function(e){return{questions:e.questions.questions}})(function(e){var t=e.questions;return a.a.createElement("div",null,a.a.createElement("div",null,"\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043a\u0432\u0435\u0441\u0442\u0430!",a.a.createElement("br",null),"\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u0431\u0435\u0437 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 \u0441\u0447\u0438\u0442\u0430\u044e\u0442\u0441\u044f \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u043c\u0438 \u043a\u0432\u0435\u0441\u0442\u0430!",a.a.createElement("br",null),"\u041e\u0442\u0432\u0435\u0442\u044b \u0431\u0435\u0437 \u0442\u0435\u043a\u0441\u0442\u0430 \u0438\u043b\u0438 \u0431\u0435\u0437 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0446\u0435\u043b\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u044b \u043d\u0435 \u0431\u0443\u0434\u0443\u0442!",a.a.createElement("br",null),"\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u043b\u0438 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 \u043d\u043e\u043c\u0435\u0440\u0430 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432/\u043e\u0442\u0432\u0435\u0442\u043e\u0432 \u043d\u0435 \u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f!"),a.a.createElement("div",null,"\u0412 \u0442\u0435\u043a\u0441\u0442\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438:",Object.keys(X).map(function(e,t){return a.a.createElement("div",{key:t},e," - ",X[e])})),a.a.createElement(Z,{className:"QuestionsManagement__question",onSave:function(e){return D.addQuestion(e)},qs:t}),t.map(function(e){return e&&a.a.createElement(Z,{className:"QuestionsManagement__question",question:e,key:e.id,onSave:function(e){return D.updateQuestion(e)},onDelete:function(e){return D.deleteQuestion(e)},qs:t})}),a.a.createElement("div",{className:"QuestionsManagement__link-container"},a.a.createElement("button",{type:"button",onClick:function(){return D.goToRoute(D.ROUTE_STATES.MAIN)}},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e")))});n(41),n(42);var ee=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={user:{firstName:"",lastName:"",login:"",phone:"",lastQuestionId:0}},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t="RegistrationForm",n="".concat(t,"_fn"),r="".concat(t,"_ln"),i="".concat(t,"_phone"),s="".concat(t,"_login");return a.a.createElement("ul",{className:this.props.className},a.a.createElement("li",null,a.a.createElement("label",{htmlFor:n,className:"RegistrationForm__label"},"\u0418\u043c\u044f:"),a.a.createElement("input",{type:"text",className:"std",id:n,name:n,maxLength:100,value:this.state.user.firstName,onChange:function(t){return e.updateUser("firstName",t)}})),a.a.createElement("li",null,a.a.createElement("label",{htmlFor:r,className:"RegistrationForm__label"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f:"),a.a.createElement("input",{type:"text",className:"std",id:r,name:r,maxLength:100,value:this.state.user.lastName,onChange:function(t){return e.updateUser("lastName",t)}})),a.a.createElement("li",null,a.a.createElement("label",{htmlFor:i,className:"RegistrationForm__label"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d:"),a.a.createElement("input",{type:"text",className:"std",id:i,name:i,maxLength:100,value:this.state.user.phone,onChange:function(t){return e.updateUser("phone",t)}})),a.a.createElement("li",null,a.a.createElement("label",{htmlFor:s,className:"RegistrationForm__label"},"\u041b\u043e\u0433\u0438\u043d:"),a.a.createElement("input",{type:"text",className:"std",id:s,name:s,maxLength:100,value:this.state.user.login,onChange:function(t){return e.updateUser("login",t)}})))}},{key:"updateUser",value:function(e,t){var n=t.target.value,r=Object(f.a)({},this.state.user,Object(x.a)({},e,n));this.setState({user:r}),D.registerUser(r)}}]),t}(a.a.Component),te=Object(o.b)(function(e){return{route:e.routing.route}})(ee),ne=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={userInput:"",currentQuestionId:0},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.currentQuestionId,r=this.props.questions,i=this.props.registrationUser;if(!(e=n?r.filter(function(e){return!!e&&e.id===n})[0]:r.filter(function(e){return!!e&&e.isFirst})[0]))return a.a.createElement("h1",null,'\u041f\u0435\u0440\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d \u0438\u043b\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0432\u043e\u043f\u0440\u043e\u0441 "',n,'" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!');var s=0===e.answers.filter(Boolean).length,o=e.text.includes("<%reg%>")&&(!i||!i.phone||!i.firstName&&!i.lastName||!i.login);return a.a.createElement("div",null,a.a.createElement("div",{className:p()("Quest__text","Quest__ml")},this.renderQuestionText(e)),!s&&!o&&a.a.createElement("ul",{className:"Quest__answers"},e.answers.map(function(e){return e&&e.text&&e.nextQuestion?a.a.createElement("li",{key:e.id,className:"Quest__action-container"},t.renderAnswer(e)):null})),s&&a.a.createElement("ul",{className:"Quest__final-actions"},a.a.createElement("li",null,a.a.createElement("button",{type:"button",onClick:function(){return D.restartGame()}},"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430")),a.a.createElement("li",null,a.a.createElement("button",{type:"button",onClick:function(){return D.goToRoute(D.ROUTE_STATES.MAIN)}},"\u0414\u0430\u0442\u044c \u043f\u043e\u0438\u0433\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u043c"))))}},{key:"renderAnswer",value:function(e){var t=this;return e.needUserInput?a.a.createElement("div",{className:"Quest__user-input-container"},a.a.createElement("input",{type:"text",maxLength:100,value:this.state.userInput,onChange:function(e){return t.setState({userInput:e.target.value})},className:"std",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442 \u0437\u0434\u0435\u0441\u044c"}),this.state.userInput&&a.a.createElement("button",{type:"button",className:"Quest__user-input-submit",onClick:function(){return t.handleSelectedAnswer(e)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442")):a.a.createElement("button",{type:"button",onClick:function(){return t.handleSelectedAnswer(e)},className:p()("Quest__action","Quest__ml")},this.replaceLogin(e.text))}},{key:"handleSelectedAnswer",value:function(e){var t=e.nextQuestion;if(e.needUserInput){var n=e.text.toLowerCase().trim();t=this.state.userInput.toLowerCase().trim()===n?e.nextQuestion:e.incorrectUserInputNextQuestion}D.nextQuestion(t||0)}},{key:"renderQuestionText",value:function(e){if(e.randomLineText){var t=e.text.split("\n").filter(Boolean),n=t[Math.floor(Math.random()*t.length)];return this.replaceLogin(n)}if(e.text.includes("<%reg%>")){var r=e.text.split("<%reg%>");return[this.replaceLogin(r[0].trim()),a.a.createElement(te,{key:1,className:"Quest__registration"}),this.replaceLogin(r[1].trim())]}return this.replaceLogin(e.text)}},{key:"replaceLogin",value:function(e){if(!e.includes("<%login%>"))return e;var t=this.props.registrationUser&&this.props.registrationUser.login||"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c";return e.split("<%login%>").join(t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.currentQuestionId&&e.currentQuestionId!==t.currentQuestionId?Object(f.a)({},t,{userInput:""}):null}}]),t}(a.a.Component),re=Object(o.b)(function(e){return{questions:e.questions.questions,currentQuestionId:e.questions.currentQuestionId,registrationUser:e.users.registrationUser}})(ne),ae=Object(o.b)(function(e){return{route:e.routing.route}})(function(e){switch(e.route){case D.ROUTE_STATES.QUEST:return a.a.createElement(re,null);case D.ROUTE_STATES.ADMIN_QUESTIONS_LIST:return a.a.createElement($,null);case D.ROUTE_STATES.ADMIN_MAIN:return a.a.createElement(K,null);case D.ROUTE_STATES.MAIN:default:return a.a.createElement(P,null)}}),ie=Object(o.b)(function(e){return{route:e.routing.route}})(function(e){var t=e.route,n={_header_small:t!==v.MAIN,"_quest-in-progress":t===v.QUEST};return a.a.createElement("div",{className:p()("App",n)},a.a.createElement("div",{className:"App__container"},a.a.createElement(G,{className:"App__header"}),a.a.createElement(ae,null)))}),se=n(11),oe=Object(se.b)({fullScreen:N,routing:Q,questions:j,users:C}),ue={fullScreen:b,routing:y,questions:w,users:q};var ce=Object(se.c)(oe,ue);D.setStore(ce);var le=a.a.createElement(o.a,{store:ce},a.a.createElement(ie,null));s.a.render(le,document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.7203a29c.chunk.js.map